# What is Kafka?

## 카프카(Kafka)란?

카프카(Kafka)는 아파치 소프트웨어 재단에서 개발한 파이프라인, 스트리밍 분석, 데이터 통합 및 미션 크리티컬 애플리케이션을 위해 설계된 고성능 분산 이벤트 스트리밍 플랫폼 이다. 카프카는 높은 처리량, 내구성, 확장성을 제공하여 로그 및 이벤트 데이터를 처리하는 데 주로 사용된다.

### 카프카의 탄생 배경

카프카는 링크드인(LinkedIn)에서 시작된 프로젝트로, 링크드인은 실시간 데이터 처리를 위해 기존 시스템의 한계를 극복하고자 했다. 기존의 메시징 시스템은 대규모 데이터 스트림 처리에서 성능과 확장성에 문제가 있었기 때문에, 이를 해결하기 위해 카프카를 개발하게 되었다.

### 기존 데이터 시스템의 문제점

<figure><img src="../../.gitbook/assets/image (165).png" alt=""><figcaption></figcaption></figure>

1. **확장성 문제**: 기존 메시징 시스템은 대규모 데이터 스트림을 처리할 때 확장성이 부족하다.
2. **데이터 유실**: 높은 처리량을 유지하면서 데이터의 유실을 방지하기 어렵다.
3. **복잡한 데이터 통합**: 여러 데이터 소스와 싱크를 효율적으로 연결하는 데 어려움이 있다.
4. **시스템 복잡도 증가:** 데이터 흐름 파악 및 시스템 관리가 어려우며, 장애 발생 시 대응 시간 증가 하고, HW 교체 및 SW 업그레이드 시 관리 포인트와 작업 시간이 증가한다.
5. **데이터 파이프라인 관리의 어려움:** 애플리케이션과 데이터 시스템 간 파이프라인마다 데이터 포맷과 처리 방식이 달라 확장성 및 유연성이 떨어지고, 데이터 불일치 가능성으로 신뢰도 감소한다.

### 카프카 적용 후

카프카를 도입함으로써 실시간 데이터 스트림 처리가 가능해졌고, 대규모 데이터의 수집, 저장, 처리, 분석이 쉬워졌습니다. 이는 특히 대용량 로그 데이터 처리와 이벤트 기반 아키텍처에서 큰 장점을 제공한다.

<figure><img src="../../.gitbook/assets/image (164).png" alt=""><figcaption></figcaption></figure>

## 카프카 구성요소 및  특징

### 카프카 클러스터

📒**클러스터(Cluster):** 카프카 클러스터(Kafka Cluster)는 아파치 카프카(Apache Kafka)를 사용하여 여러 대의 브로커(broker) 서버가 모여서 구성된 분산 시스템이다. 카프카 클러스터는 대용량 데이터 스트리밍 및 실시간 데이터 처리에 최적화되어 있으며, 데이터의 높은 처리량과 내구성을 보장한다.

<figure><img src="../../.gitbook/assets/image (161).png" alt=""><figcaption></figcaption></figure>

### 구성 요소

1. **브로커(Broker):**
   * 카프카 브로커는 메시지를 저장하고, 클라이언트(프로듀서 및 컨슈머)와 통신하는 서버이다.
   * 각 브로커는 하나의 노드로 동작하며, 여러 개의 브로커가 모여 클러스터를 형성한다.
2. **주키퍼(ZooKeeper):**
   * 카프카 클러스터의 메타데이터를 관리하는 역할을 한다.
   * 브로커, 토픽, 파티션 등의 상태 정보를 저장하고 관리한다.
   * 클러스터의 리더 선출 및 장애 조치에 중요한 역할을 한다.
3. **프로듀서(Producer):**
   * 메시지를 생성하여 브로커에 전송하는 역할을 한다.
   * 여러 프로듀서가 동시에 작동하여 데이터를 전송할 수 있다.
4. **컨슈머(Consumer):**
   * 브로커로부터 메시지를 가져와 처리하는 역할을 한다.
   * 컨슈머 그룹을 구성하여 병렬 처리가 가능하다.
5. **토픽(Topic):**
   * 메시지가 저장되는 논리적인 채널이다.
   * 각 토픽은 여러 개의 파티션(partition)으로 나누어져 있으며, 이를 통해 병렬 처리가 가능하다.
6. **파티션(Partition):**
   * 각 토픽이 물리적으로 나누어진 단위이다.
   * 파티션은 브로커에 분산되어 저장되며, 각 파티션은 하나의 리더와 여러 개의 팔로워(replica)를 가진다.

### 요약

* **프로듀서(Producer)**: 데이터를 카프카로 보내는 클라이언트
* **컨슈머(Consumer)**: 데이터를 카프카에서 읽는 클라이언트
* **토픽(Topic)**: 메시지를 분류하는 카프카의 논리적 단위
* **파티션(Partition)**: 토픽을 나눈 단위로, 병렬 처리와 데이터 분산을 가능하게 함
* **브로커(Broker)**: 카프카 클러스터의 서버, 파티션을 관리하고 저장
* **주키퍼(ZooKeeper)**: 카프카 클러스터의 메타데이터를 관리하고 조율

<figure><img src="../../.gitbook/assets/image (162).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (163).png" alt=""><figcaption></figcaption></figure>

### 특징

* **확장성**: 필요에 따라 브로커를 추가하여 쉽게 확장 가능
* **내구성**: 메시지를 디스크에 저장하여 데이터 유실 방지
* **높은 처리량**: 많은 양의 데이터를 빠르게 처리
* **분산 처리**: 데이터가 여러 파티션에 분산 저장되어 병렬 처리 가능
* **실시간 처리**: 실시간 데이터 스트림을 처리하여 빠른 응답 제공

## 유사 서비스

### 메세지 큐 (Message Queue, MQ) 란?

메세지 큐는 비동기 메시지를 송수신하기 위한 통신 방법입니다. 생산자가 메시지를 큐에 보내면, 소비자가 이를 큐에서 읽어갑니다. 이는 시스템 간의 결합도를 낮추고, 메시지 처리의 안정성과 효율성을 높입니다.

### 메세지 브로커 / 이벤트 브로커

메세지 브로커 또는 이벤트 브로커는 메시지의 송수신을 중개하는 소프트웨어입니다. 이를 통해 서로 다른 시스템 간의 메시지 전달을 효율적으로 처리할 수 있다.

#### 1) Redis 의 동작 방식 및 특징

* **동작 방식**: Redis는 메모리 기반의 데이터 구조 저장소로, 빠른 읽기/쓰기 성능을 제공한다.
* **특징**:
  * 인메모리 데이터 저장으로 매우 빠른 속도
  * 다양한 데이터 구조 지원 (리스트, 세트, 해시 등)
  * 데이터 영속성을 위한 스냅샷 및 AOF(Append-Only File) 기능

#### 2) RabbitMQ 의 동작 방식 및 특징

* **동작 방식**: RabbitMQ는 AMQP(Advanced Message Queuing Protocol)를 사용하는 메시지 브로커로, 프로듀서와 컨슈머 간의 메시지를 큐에 저장하고 전달한다.
* **특징**:
  * 강력한 라우팅 기능
  * 다양한 메시지 교환 패턴 지원 (팬아웃, 토픽, 헤더 등)
  * 안정적인 메시지 전달 및 인메모리 큐

#### 3) Kafka의 동작 방식 및 특징

* **동작 방식**: 카프카는 분산 스트리밍 플랫폼으로, 프로듀서가 보낸 메시지를 토픽의 파티션에 저장하고, 컨슈머가 이를 읽는다.
* **특징**:
  * 높은 처리량과 내구성
  * 로그 중심의 저장 방식
  * 확장 가능한 분산 아키텍처

#### 4) 사용 구분

* **Redis**: 초고속 데이터 접근이 필요한 경우 (캐싱, 세션 저장소 등)
* **RabbitMQ**: 복잡한 라우팅 및 메시지 전달이 필요한 경우 (작업 큐, RPC 등)
* **Kafka**: 대규모 실시간 데이터 스트림 처리 및 로그 데이터 처리

